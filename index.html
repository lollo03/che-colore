
<!DOCTYPE html>
<html lang="it">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		content="Analisi sul vero colore delle regioni.">
	<meta name="keywords" content="COVID 19, coronavirus, zone, regioni, colori">

	<title>Che colore?</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
	<link rel="stylesheet" href="jquery-jvectormap-2.0.5.css" type="text/css" media="screen" />
	<script src="jquery.js"></script>
	<script src="jquery-jvectormap-2.0.5.min.js"></script>
	<script src="jquery-jvectormap-it_regions-mill.js"></script>
	<style>
		.text-big {
			font-size: 130%;
			font-weight: bold;
			position: relative;
			top: -5px;
			margin-bottom: -4px;
		}

		.text-bigger {
			font-size: 200%;
			font-weight: bold;
			position: relative;
			top: -6px;
			margin-bottom: -4px;
		}
	</style>
</head>

<body>
	<div class="container mt-2 pt-2 px-xl-5">
		<h1>Che colore è effettivamente la mia regione?</h1>
		<p>
			La domanda non ha una risposta precisa.
			Il governo decide il colore delle regioni in base ad una serie di parametri.
			Questa pagina presenta <b>UNA STIMA</b> basata sull'effetivo numero dei casi settimanali ogni 100 mila abitanti.
			Non so esattamente quali sono i criteri, ma ho cercato di avvicinarmi il più possibile alla realtà.
		</p>
		<div id="map" style="width: 80%; height: 600px; margin: auto"></div>
		<script>
			var gdpData = {
				"IT-23": 
138.4,
				"IT-21": 
163.9,
				"IT-25": 
162.7,
				"IT-52": 
87.9,
				"IT-36": 
382.7,
				"IT-42": 
163.4,
				"IT-45": 
297.1,
				"IT-57": 
252.5,
				"IT-32": 
229.8,
				"IT-55": 
167.9,
				"IT-67": 
119.8,
				"IT-34": 
425.4,
				"IT-65": 
139.3,
				"IT-62": 
202.6,
				"IT-75": 
201.1,
				"IT-77": 
147.3,
				"IT-78": 
126.3,
				"IT-82": 
240.1,
				"IT-72": 
133.5,
				"IT-88": 
40.8,
			};
	$(function () {
				
				colors = {};
				lung = Object.keys(gdpData).length;
				for(i=0; i<lung; i++){
					colors[Object.keys(gdpData)[i]] = "#ffffff";
					if(gdpData[Object.keys(gdpData)[i]]>50){
						colors[Object.keys(gdpData)[i]] = "#8dcf00";
					}
					if(gdpData[Object.keys(gdpData)[i]]>150){
						colors[Object.keys(gdpData)[i]] = "#cfcc00";
					}
					if(gdpData[Object.keys(gdpData)[i]]>250){
						colors[Object.keys(gdpData)[i]] = "#c40000";
					}
				}
				console.log(colors);

				$('#map').vectorMap({
					map: 'it_regions_mill',
					series: {
						regions: [{
							values: colors
						}]
				},
					onRegionTipShow: function (e, el, code) {
						el.html(el.html() + ' (Casi ogni 100K abitanti - ' + gdpData[code] + ')');
					}
				});
			})
			
		</script>

		<h3 class="mt-2">Frequently Asked Questions</h3>
		<p>
			<b><i>Il progetto è open-source?</i></b> <br />
			Sì! Oltre ad essere open-source, è anche <b>software libero</b>.
			Puoi accedere al codice e leggere i dettagli della licenza sulla
			<a href="https://github.com/lollo03/che-colore">pagina GitHub dedicata</a>.
		</p>
		<p>
			<b><i>Da dove prendi i dati?</i></b> <br />
			Dal <a href="https://github.com/pcm-dpc/COVID-19">dataset ufficiale</a> della Protezione Civile. Li ringrazio per il contributo.
		</p>
		<p>
			<b><i>Questo sito è simile a <a href="https://quanto-manca.it/">quanto manca!</a>?</i></b> <br />
			Hai ragione! Molto del codice, ed il metodo di funzionamento stesso è derivato dal progetto qunto manca.
		</p>
		<p>
			<b><i>Come funziona, a livello tecnico?</i></b> <br />
			Il funzionamento è semplice. Ogni tanto viene
			attivata una GitHub Action che scarica l'ultimo dataset ed esegue lo script che aggiorna la pagina e genera l'infografica,
			Viene quindi fatto un commit sul branch <code>gh-pages</code> dove risiedono i sorgenti
			computati della pagina, serviti da GitHub Pages.
			Tutta l'infrastruttura è quindi completamente serverless e automaticamente gestita da GitHub. <br />
			Lo script è scritto in Python ed utilizza le libreria di analisi pandas. 
			Per la pagina utilizzo Bootstrap e del CSS scritto da Marco Aceti; sicuramente questo sarà
			oggetto di miglioramento in futuro.
		</p>
	</div>
	<div class="container-fluid mt-2 pb-4">
		<hr />
		<div class="container pt-2 px-xl-5">
			Creato con &hearts; da Lorenzo Andreasi</a>
			(<a href="https://github.com/lollo03">GitHub</a>,
			<a href="https://t.me/lollo0">Telegram</a>). <br />
			<span class="text-muted">Copyleft &#127279; Lorenzo Andreasi, 2021. <i>Some rights reserved.</i></span> <br />
		</div>
	</div>

	<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "320801433d3e412aae08811bb591a2c7"}'></script><!-- End Cloudflare Web Analytics -->
	
</body>

</html>