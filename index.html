
<!DOCTYPE html>
<html lang="it">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description"
		content="Analisi sul vero colore delle regioni.">
	<meta name="keywords" content="COVID 19, coronavirus, zone, regioni, colori">

	<title>Che colore?</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
	<link rel="stylesheet" href="jquery-jvectormap-2.0.5.css" type="text/css" media="screen" />
	<script src="jquery.js"></script>
	<script src="jquery-jvectormap-2.0.5.min.js"></script>
	<script src="jquery-jvectormap-it_regions-mill.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>
	<script>
		const options = {
			bottom: '32px', // default: '32px'
			right: '32px', // default: '32px'
			left: 'unset', // default: 'unset'
			time: '0.3s', // default: '0.3s'
			mixColor: '#ededed', // default: '#fff'
			backgroundColor: '#fff',  // default: '#fff'
			buttonColorDark: '#100f2c',  // default: '#100f2c'
			buttonColorLight: '#fff', // default: '#fff'
			saveInCookies: false, // default: true,
			label: 'ðŸŒ“', // default: ''
			autoMatchOsTheme: true // default: true
		}
		function addDarkmodeWidget() {
    		new Darkmode(options).showWidget();
		}
		window.addEventListener('load', addDarkmodeWidget);
	</script>
	<style>
		.text-big {
			font-size: 130%;
			font-weight: bold;
			position: relative;
			top: -5px;
			margin-bottom: -4px;
		}

		.text-bigger {
			font-size: 200%;
			font-weight: bold;
			position: relative;
			top: -6px;
			margin-bottom: -4px;
		}
	</style>
</head>

<body>
	<div class="container mt-2 pt-2 px-xl-5">
		<h1>Che colore Ã¨ effettivamente la mia regione?</h1>
		<p>
			La domanda non ha una risposta precisa.
			Il governo decide il colore delle regioni in base ad una serie di parametri.
			Questa pagina presenta <b>UNA STIMA</b> basata sull'effetivo numero dei casi settimanali ogni 100 mila abitanti.
			Non so esattamente quali sono i criteri, ma ho cercato di avvicinarmi il piÃ¹ possibile alla realtÃ .
		</p>
		<div id="map" style="width: 80%; height: 500px; margin: auto"></div>
		<script>
			var gdpData = {
				"IT-23": 
132.8,
				"IT-21": 
159.1,
				"IT-25": 
160.8,
				"IT-52": 
87.0,
				"IT-36": 
379.3,
				"IT-42": 
155.0,
				"IT-45": 
298.3,
				"IT-57": 
255.2,
				"IT-32": 
230.9,
				"IT-55": 
164.6,
				"IT-67": 
123.1,
				"IT-34": 
404.5,
				"IT-65": 
134.6,
				"IT-62": 
196.7,
				"IT-75": 
205.7,
				"IT-77": 
167.6,
				"IT-78": 
130.1,
				"IT-82": 
247.0,
				"IT-72": 
133.1,
				"IT-88": 
44.4,
			};
	$(function () {
				
				colors = {};
				lung = Object.keys(gdpData).length;
				for(i=0; i<lung; i++){
					colors[Object.keys(gdpData)[i]] = "#d1d1d1";
					if(gdpData[Object.keys(gdpData)[i]]>50){
						colors[Object.keys(gdpData)[i]] = "#8dcf00";
					}
					if(gdpData[Object.keys(gdpData)[i]]>150){
						colors[Object.keys(gdpData)[i]] = "#cfcc00";
					}
					if(gdpData[Object.keys(gdpData)[i]]>250){
						colors[Object.keys(gdpData)[i]] = "#c40000";
					}
				}
				console.log(colors);

				$('#map').vectorMap({
					map: 'it_regions_mill',
					backgroundColor: "rgba(255,0,0,0)",
					series: {
						regions: [{
							values: colors
						}]
				},
					onRegionTipShow: function (e, el, code) {
						el.html(el.html() + ' - (' +  gdpData[code] +' casi ogni 100K abitanti)');
					}
				});
			})
			
		</script>

		<p class="text-muted">Dati aggiornati il 
14/01/2021 alle 00:34
		</p>

		<h3 class="mt-2">Frequently Asked Questions</h3>
		<p>
			<b><i>Il progetto Ã¨ open-source?</i></b> <br />
			SÃ¬! Oltre ad essere open-source, Ã¨ anche <b>software libero</b>.
			Puoi accedere al codice e leggere i dettagli della licenza sulla
			<a href="https://github.com/lollo03/che-colore">pagina GitHub dedicata</a>.
		</p>
		<p>
			<b><i>Da dove prendi i dati?</i></b> <br />
			Dal <a href="https://github.com/pcm-dpc/COVID-19">dataset ufficiale</a> della Protezione Civile. Li ringrazio per il contributo.
		</p>
		<p>
			<b><i>Questo sito Ã¨ simile a quanto manca!?</i></b> <br />
			Hai ragione! Molto del codice, ed il metodo di funzionamento stesso Ã¨ derivato dal progetto <a href="https://quanto-manca.it/">quanto manca</a>.
		</p>
		<p>
			<b><i>Come funziona, a livello tecnico?</i></b> <br />
			Il funzionamento Ã¨ semplice. Ogni tanto viene
			attivata una GitHub Action che scarica l'ultimo dataset ed esegue lo script che aggiorna la pagina e genera l'infografica,
			Viene quindi fatto un commit sul branch <code>gh-pages</code> dove risiedono i sorgenti
			computati della pagina, serviti da GitHub Pages.
			Tutta l'infrastruttura Ã¨ quindi completamente serverless e automaticamente gestita da GitHub. <br />
			Lo script Ã¨ scritto in Python ed utilizza le libreria di analisi pandas. 
			Per la pagina utilizzo Bootstrap e del CSS scritto da Marco Aceti; sicuramente questo sarÃ 
			oggetto di miglioramento in futuro.
		</p>
	</div>
	<div class="container-fluid mt-2 pb-4">
		<hr />
		<div class="container pt-2 px-xl-5">
			Creato con &hearts; da Lorenzo Andreasi</a>
			(<a href="https://github.com/lollo03">GitHub</a>,
			<a href="https://t.me/lollo_0">Telegram</a>). <br />
			<span class="text-muted">Copyleft &#127279; Lorenzo Andreasi, 2021. <i>Some rights reserved.</i></span> <br />
		</div>
	</div>

	<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "320801433d3e412aae08811bb591a2c7"}'></script><!-- End Cloudflare Web Analytics -->
	
</body>

</html>